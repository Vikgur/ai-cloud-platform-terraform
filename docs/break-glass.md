# Оглавление

- [Назначение документа и философия break-glass](#назначение-документа-и-философия-break-glass)
- [Break-glass как governance failure path](#break-glass-как-governance-failure-path)
- [Условия применения break-glass](#условия-применения-break-glass)
  - [Классы допустимых инцидентов](#классы-допустимых-инцидентов)
  - [Что не является основанием для break-glass](#что-не-является-основанием-для-break-glass)
- [Субъекты экстренного доступа](#субъекты-экстренного-доступа)
  - [Кто может инициировать break-glass](#кто-может-инициировать-break-glass)
  - [Кто может утвердить break-glass](#кто-может-утвердить-break-glass)
  - [Разделения ролей](#разделения-ролей)
- [Scope и ограничения экстренного доступа](#scope-и-ограничения-экстренного-доступа)
  - [Минимизация blast radius](#минимизация-blast-radius)
  - [Ограничение по ресурсам](#ограничение-по-ресурсам)
- [TTL и time-bound override](#ttl-и-time-bound-override)
  - [Временные ограничения](#временные-ограничения)
  - [Автоматическое истечение прав](#автоматическое-истечение-прав)
  - [Продление](#продление)
- [Аудит и трассируемость](#аудит-и-трассируемость)
  - [Обязательные события аудита](#обязательные-события-аудита)
  - [Хранение audit trail](#хранение-audit-trail)
  - [Неподменяемость](#неподменяемость)
- [Интеграция в lifecycle](#интеграция-в-lifecycle)
  - [Связь с workflows](#связь-с-workflows)
  - [Связь с state-backend](#связь-с-state-backend)
  - [Связь с security-model](#связь-с-security-model)
- [Post-incident normalization](#post-incident-normalization)
  - [Отзыв прав](#отзыв-прав)
  - [Возврат к стандартной модели](#возврат-к-стандартной-модели)
  - [Post-mortem](#post-mortem)
- [Explicit non-goals](#explicit-non-goals)
- [Связь с другими документами](#связь-с-другими-документами)

---

## Назначение документа и философия break-glass

`break-glass.md` — break-glass доступ и экстренные сценарии.

Break-glass описывает строго контролируемый механизм экстренного доступа, применяемый **только** при отказе штатной модели управления доступами и процессов управления инфраструктурой.

Break-glass не предназначен для:
- ускорения работ,
- обхода governance,
- решения неудобств RBAC/IAM,
- компенсации плохого дизайна процессов.

Break-glass — это осознанный, задокументированный и аудируемый путь **в условиях отказа управления**, а не операционная норма.

---

## Break-glass как governance failure path

Break-glass трактуется как:
- индикатор критического инцидента,
- сигнал о нарушении или недостаточности текущей governance-модели,
- событие, требующее последующего анализа и корректировки архитектуры, политик или процессов.

Любое использование break-glass:
- считается инцидентом безопасности,
- автоматически инициирует post-incident процедуры,
- рассматривается как исключение, а не допустимая практика.

---

## Условия применения break-glass

### Классы допустимых инцидентов

Break-glass разрешён **только** в следующих случаях:

- Потеря доступа к критической инфраструктуре, блокирующая восстановление сервиса.
- Компрометация или отказ IAM / RBAC, не позволяющий выполнить восстановительные действия.
- Критический security-инцидент, требующий немедленного вмешательства.
- Полный отказ CI/CD, GitOps или control-plane при наличии бизнес-критического простоя.
- Угроза потери данных или нарушения целостности state.

Критерий:
отсутствие альтернативного, штатного, одобренного пути восстановления.

### Что не является основанием для break-glass

Break-glass **запрещён**, если:

- требуется ускорить деплой или хотфикс,
- отсутствует доступ из-за ошибки пользователя,
- процесс кажется «слишком медленным»,
- не настроены роли или политики,
- существует стандартный workflow решения.

---

## Субъекты экстренного доступа

### Кто может инициировать break-glass

Инициировать могут:
- on-call lead,
- security lead,
- platform owner.

Обязанности инициатора:
- зафиксировать инцидент,
- указать цель и scope,
- запустить процедуру approval.

### Кто может утвердить break-glass

Утверждают:
- security owner,
- head of platform / infrastructure,
- делегированный authority по security policy.

Принцип:
инициатор ≠ утверждающий.

### Разделения ролей

Обязательно:
- минимум два человека,
- разные роли,
- разные домены ответственности.

---

## Scope и ограничения экстренного доступа

### Минимизация blast radius

Экстренный доступ:
- выдаётся строго под задачу,
- ограничен конкретными ресурсами,
- не расширяется без обоснования.

Запрещено:
- blanket-admin,
- доступ «на всякий случай».

### Ограничение по ресурсам

Scope фиксируется заранее:
- аккаунты,
- регионы,
- сервисы,
- разрешённые операции.

---

## TTL и time-bound override

### Временные ограничения

Каждый break-glass доступ:
- имеет заранее заданный TTL,
- измеряется часами,
- минимально достаточен.

### Автоматическое истечение прав

Права:
- отзываются автоматически,
- не требуют ручного cleanup,
- не могут остаться активными.

### Продление

Продление:
- требует нового approval,
- фиксируется как отдельный инцидент.

---

## Аудит и трассируемость

### Обязательные события аудита

Логируется:
- инициатор,
- утверждающий,
- время активации,
- scope,
- все действия,
- момент отзыва.

### Хранение audit trail

Audit trail:
- централизованный,
- immutable,
- доступен security и audit ролям.

### Неподменяемость

Требования:
- append-only,
- контроль целостности,
- запрет удаления и изменения.

---

## Интеграция в lifecycle

### Связь с workflows

Break-glass:
- исключение из workflows,
- аварийный fallback,
- триггер post-mortem.

### Связь с state-backend

Экстренный доступ к state:
- максимальный риск,
- отдельный approval,
- минимальный TTL и scope.

State — security asset.

### Связь с security-model

Break-glass:
- не расширяет стандартные роли,
- не используется постоянно,
- существует вне основной RBAC-модели.

---

## Post-incident normalization

### Отзыв прав

После инцидента:
- подтверждается отзыв доступа,
- проверяется отсутствие residual access,
- валидируется IAM/RBAC.

### Возврат к стандартной модели

Обязательно:
- возврат к GitOps и CI-driven управлению,
- запрет ручных изменений,
- проверка drift.

### Post-mortem

Проводится:
- анализ причины break-glass,
- выявление дефектов governance,
- фиксация corrective actions.

Цель:
минимизировать повторное использование break-glass.

---

## Explicit non-goals

Break-glass:
- не admin convenience,
- не shortcut,
- не workaround плохой архитектуры.

Использование без инцидента — нарушение политики.

---

## Связь с другими документами

- security-model.md — роли, политики, контроль доступа
- workflows.md — lifecycle изменений и инцидентов
- state-backend.md — защита state как security asset
